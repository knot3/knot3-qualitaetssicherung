% !TeX encoding = UTF-8
%



\subsection{Ge{"a}ndert}
\label{Abschnitt:Aenderungen:Protokoll:Behobene_Probleme}

Fehler die wir verbessert haben oder Ergänzungen werden hier beschrieben. Kleinigkeiten fließen nicht in das Protokoll ein.\\~\\



\subsubsection*{Transformations-Vorschau}

\textbf{Problem:}
Während der Spieler eine Transformation durchführt, konnte er nicht erkennen, wie das Ergebnis dieser Transformation aussehen wird.
Dies wurde im Pflichtenheft durch das Anzeigen einer Schattenvorschau jedoch gefordert.\\

\textbf{Änderung:}
Wir zeigen nun Änderungen direkt an so wie sie übernommen werden würden, wenn man den Zug beendet. Dies erforderte einen erheblichen Umbau in der Art wie ein Zug ausgeführt wird.
Während vorher separat geprüft wurde ob eine Transformation gültig ist und die eigentliche Transformation erst beim beenden des Zuges durchgeführt wurde war dieses System für eine Vorschau ungeeignet. Jetzt wird versucht die Transformation durchzuführen und sowohl der Erfolg bzw. Misserfolg sowie ein neuer veränderter Knoten zurückgegeben, der als Vorschau verwendet werden kann und nach Abschluss des Zuges den aktuellen Knoten ersetzt.
Abschließend haben wir uns dagegen entschieden die nicht geänderten Teile des alten Knotens anzuzeigen, da es sowohl erheblich mehr Rechenleistung, deren Bedarf ohnehin schon durch die direkte Vorschau erheblich gestiegen ist, als auch der Übersichtlichkeit schadet. Die zusätzlichen Kannten, selbst halb-transparent, hätten das Blickfeld zusätzlich behindert ohne dabei einen Nutzen zu haben.\\



\clearpage



\subsubsection*{OpenAL und SDL2}

Auf Systemen, auf denen kein OpenAL bzw. SDL2 vorhanden ist, wird dieses automatisch heruntergeladen und ins Installationsverzeichnis von Knot3 entpackt.
Dann ist Knot3 nach einem Programmneustart spielbar.\\

Knot3 nutzt nun auch eine neuere Version von MonoGame-SDL2, die die freie OpenAL-Implementierung OpenAL Soft und nicht die von Loki Software / Creative Labs nutzt. Siehe:  	
  	\begin{tabbing}
  			\= ~ \href {https://github.com/flibitijibibo/SDL2-CS/pull/54}
  					   {https://github.com/flibitijibibo/SDL2-CS/pull/54}\\
  					   
  	\end{tabbing} 

Die von uns zur Kompilierung verwendeten Versionen der Abhängigkeiten sind SDL Version 2.0.2, SDL2\_image Version 2.0.0 und OpenAL Soft Version 1.15.1.

% Spielbeschreibung

\subsubsection*{Spielbeschreibung}

\textbf{Problem:}
Es gibt keinen Tutorial-Mode, indem dem Spieler die grundlegenden Spielmechaniken erklärt werden.\\

\textbf{Änderung:} Es gibt nun eine separate PDF (\glqq Spielanleitung.pdf\grqq), welche die grundlegenden Spielmechaniken erklärt.\\


% Lokalisierung

\subsubsection*{Lokalisierung}

\textbf{Problem:}
Es gibt keine Lokalisierung, alle Texte im Spiel sind immer auf Englisch.\\

\textbf{Änderung:} Es gibt nun im Content-Verzeichnis für jede unterstützte Sprache je eine ini-Datei, die eine Zuordnung zwischen den englischen Strings und den in die jeweilige Sprache übersetzten Strings enthält und vom Spiel eingelesen wird.\\


% Tastenabfrage

\subsubsection*{Tastenabfrage}
\textbf{Problem:}
Wir haben festgestellt, dass unser gewähltes Abtast-Intervall von 100 Millisekunden zu kurz ist für normale Tasteneingaben. Bei normalen Tippen konnte es passieren das nun die Taste zweimal abgetastet wurde. Was eingaben von Spielernamen erschwerte.\\

\textbf{Änderung:} Das Intervall wurde auf 200 Millisekunden erhöht um dieses Problem zu verhindern.\\


% Language-Objekte

\subsubsection*{Language}
\textbf{Problem:}
Ein erstelltes Language-Objekt konnte seine Attribute nicht mehr ändern, nachdem es erstellt wurde.\\

\textbf{Änderung:} Die Attribute verweisen nur auf die entsprechende Datei in der alle Attribute in der aktuellsten Fassung stehen. Somit werden die Attribute nun direkt aus der Datei ausgelesen wenn sie benötigt werden.\\


% Farbkodierung im Level-Dateiformat

\subsubsection*{Farbcodierung im Level-Dateiformat}

\textbf{Problem:}
Es konnten keine Farben in RGB angegeben werden. Es wurden immer RGBA werte erwartet.
Falls es nur 6 Hexadezimal-Zahlen (RGB) waren wurde eine Exception ausgelöst.\\

\textbf{Änderung:} Es wird nun überprüft ob es sich um RGB oder RGBA handelt.\\


% Große IF-ELSE-Blöcke

\subsubsection*{Große IF-ELSE-Blöcke}
\textbf{Problem:}
In der Dekodierung und Kodierung der Richtung beim Laden bzw. Speichern von Knoten in das Dateiformat wurde die Zuordnung jeweils durch einen großen IF-ELSE-Block erledigt.\\

\textbf{Änderung:} Es gibt jetzt ein Dictonary mit den Zuordnungen welches für beide Funktionen Verwendung findet. Das objektorientierte Programmier-Paradigma wird so besser umgesetzt.\\


% Installation/Deinstallation

\subsubsection*{Installation/Deinstallation}
\textbf{Problem:} Im Pflichtenheft war eine automatische Installation/Deinstallation und Testfällen dazu vorgesehen.\\

\textbf{Änderung:} Während er Implementierungsphase wurde dieses Feature nicht implementiert.
Wir haben uns darauf geeinigt das Spiel als ein Archiv auszuliefern.
Es gibt keine automatische Installation/Deinstallation. Die Installation erfolgt vom Nutzer durch Entpacken des Archivs.\\

Die Abhängigkeiten von Knot3 werden teilweise mitgeliefert (die Programmbibliotheken von MonoGame-SDL2, OggSharp und Ionic.Zip) und teilweise automatisch beim ersten Start des Spiels heruntergeladen und installiert (OpenAL Soft und SDL2) - Siehe "OpenAL und SDL".\\

Die Deinstallation nimmt der Spieler manuell auf seinem System vor. Dazu muss zunächst das Programmverzeichnis gelöscht werden.
Wenn auch die Konfigurationsdateien gelöscht werden sollen, so kann dazu das in der MonoGame-Version mitgelieferte ConfigReset-Tool zu diesem Zweck genutzt werden.\\

\subsubsection*{Error-Dialog}
\textbf{Problem:} Das Spiel stürtze bei unvorhergesehenen Fehlern ab.\\

\textbf{Änderung:} Wir zeigen nun die Fehler die auftreten in einem extra eingefügten Error-Dialog an. Dieser Error-Dialog zeigt die von der geworfenen Exception übergebene Nachricht an. Das Spiel stürzt nicht mehr ohne Vorwarnung ab.\\

\subsubsection*{Programm-Icon}

\textbf{Änderung:} Die ausführbare (.exe) Datei hat ein Icon erhalten.\\

\subsubsection*{Zurücksetzen der Einstellungen}

\textbf{Änderung:} Falls das Spiel nicht mehr startet, kann die mitgelieferte ConfigReset.exe zum Zurücksetzen der Einstellungen genutzt werden.
Diese ist nur in der MonoGame-Version enthalten.\\
